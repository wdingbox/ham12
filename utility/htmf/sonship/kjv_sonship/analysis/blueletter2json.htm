<!DOCTYPE html>
<HTML manifest___xxx="BiblePad-2015.appcache">

<HEAD>
    <TITLE>Bii</TITLE>
    <base target="_blank" />
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
    <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">


    <link rel="stylesheet" href="./sonship.css">
    </link>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script language="javascript" src="../../../../htmjs/jq/table_Indexer.js"></script>
    <script language="javascript" src="../../../../htmjs/jq/jquery.tablesorter.js"></script>
    <!--------->
    <script language="javascript" src="../json/HebrewSonship.json.js"></script>
    <script language="javascript" src="../json/GreekSonship.json.js"></script>
    <script language="javascript" src="./sonship.jq.js"></script>

    <style>
        .hili {
            background-color:cornflowerblue;
        }
    </style>



    <script language="javascript">
        $(function () {
            var sa = "";
            $("a").each(function () {
                var tx = $(this).attr("href");
                $(this).text(tx);
                sa += `<a class='filename' title="filename">${tx}</a><br/>`;

            });
            $("#items").append(sa).find("a").bind("click", function () {
                $(".hili").removeClass("hili");
                $(this).toggleClass("hili");
            });

            $(".filename").bind("click", function () {
                var filename = $(this).text();
                gen_json(filename);
            });

        });/////////////
        var obj = {};


        function get_vname(filename){
            var li = filename.lastIndexOf("/");
            var str = filename.substr(1 + li);
            var arr = str.split(".");
            return arr[0];
        }

        function gen_json(filename) {
            ///var url = "../blueletter/demut_likeness.htm";
            obj = {};

            jQuery.ajax({
                url: filename,
                success: function (result) {
                    console.log(result);
                    $(result).find(".bVerse").each(function () {
                        var vs = $(this).find(".bVerse__col-two").text().trim();
                        var tx = $(this).find(".bVerse__col-three").text().trim();

                        var idx = tx.indexOf("-");
                        vs = tx.substr(0, idx);
                        tx = tx.substr(1 + idx);
                        tx = tx.trim();

                        tx = tx.replace(/[\\][n]/g, " ");
                        tx = tx.replace(/[\n|\r|\t]+/g, " ");
                        //tx = tx.replace(/[\s]{2,}/g,"  ");

                        console.log(vs, tx);
                        obj[vs] = tx;
                    });
                },
                async: false
            });



            $("#out").val("var " + get_vname(filename) + "=\n" + JSON.stringify(obj, null, 4));
        };


        function gen_table() {
            var val = $("#out").val();
            var idx = val.indexOf("=");
            val = val.substr(idx + 1);
        };

    </script>

</HEAD>

<BODY xonbeforeunload="return 'leave?';">
    <div id="ctrl">
        <button id="indxer">indxer</button>
        <textarea id='out'></textarea>
        <button onclick="gen_table_fr_obj(obj);">gen_tab</button>
        <button onclick="get_json_notes();">gen_notes</button>

    </div>
    <p>...
    </p>
    <p>...
    </p>
    <p>...
    </p>
    <p>...
    </p>

    <br /><a href="../blueletter/demut_likeness.htm">demut</a>
    <br /><a href="../blueletter/tselem_image.htm">demut</a>
    <br /><a href="../blueletter/demut_likeness.htm">demut</a>
    <br /><a href="../blueletter/demut_likeness.htm">demut</a>
    <br /><a href="../blueletter/demut_likeness.htm">demut</a>
    <hr />

    <div id="items">click to generate json from file:<br></div>

    <div id="holder">-</div>
</BODY>

</HTML>
<script type="text/javascript">

</script>