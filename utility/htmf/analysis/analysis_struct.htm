<!DOCTYPE html>
<HTML manifest___xxx="BiblePad-2015.appcache">
<HEAD>
    <TITLE>cuvs</TITLE>
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
	<META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">

   


    <script>    
    var gStartDate = new Date();
    console.log(  gStartDate.toString() +" ------ start load");//
    </script>   



    <script language="javascript" src="../../htmjs/jq/jquery.js">
    </script>
    <script language="javascript" src="../../htmjs/jq/table_Indexer.js">
    </script>
    <script language="javascript" src="../../htmjs/jq/jquery.tablesorter.js"></script>


    <script language="javascript" src="../../../jsdb/jsBibleStruct/BBE.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/CUVS.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/H_G.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/KJV.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/NIV.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/PINYIN.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/STUS.json.js"></script>
    <script language="javascript" src="../../../jsdb/jsBibleStruct/WLVS.json.js"></script>
    

    

  
     
    </script>
    
    





    
    <script>    
    console.log(  (new Date()).toString() );//
    </script>
<style>
body {
    background-color: black;
    color: white;
    width:100%;
	font-size: 100%;
	
    padding:0px 0px 0px 0px;
    margin: 0px 0px 0px 0px;	

    font-family: 'Times New Roman';
}
</style>



    
<script language="javascript">
    var NameOfBibleObject={
        "BBE_st":BBE_struct,
        "CUVS_s":CUVS_struct,
        "H_G_st":H_G_struct,
        "KJV_st":KJV_struct,
        "NIV_st":NIV_struct,
        "PINYIN":PINYIN_struct,
        "STUS_s":STUS_struct,
        "WLVS_s":WLVS_struct 
    }
    var g_DiffObj={};
    var g_missingVolChpVerses={};
    var g_missingVolChpObj={};

function GetMaxKeyObj(NameOfObject){
    var MaxKeyObj={};
    $.each(NameOfObject,function(Name,StructObj){
        $.each(StructObj,function(volname,ChpObj){
            $.each(ChpObj,function(chpKey,VerseObj){
                $.each(VerseObj,function(versKey,Txt){
                    if(undefined===MaxKeyObj[volname]){
                        MaxKeyObj[volname]={};
                    }
                    if(undefined===MaxKeyObj[volname][chpKey]){
                        MaxKeyObj[volname][chpKey]={};
                    }
                    if(undefined===MaxKeyObj[volname][chpKey][versKey]){
                        MaxKeyObj[volname][chpKey][versKey]="-";
                    }

                });
            });
        });
    });////////////// 
    return MaxKeyObj;  
}
function MaxObjContrastOneObj(MaxObj,OneObj, ObjName, ObjNameIdx){
  
    function assign_missingOne(gobj,VolChp, ObjName){
                    if(undefined==gobj[VolChp]){
                        gobj[VolChp]=[];
                        $.each(NameOfBibleObject,function(name,obj){
                            gobj[VolChp].push(name);
                        });
                    }
                    var idx= Object.keys(NameOfBibleObject).indexOf(ObjName);
                    gobj[VolChp][idx]="-";
    }
    $.each(MaxObj,function(Vol,ChpObj){
        $.each(ChpObj,function(chpNum,VersObj){
            $.each(VersObj,function(versKey,str){
                if(undefined==OneObj[Vol]) {
                    console.error(ObjName+" NO "+Vol+"*:*");
                }else if(undefined==OneObj[Vol][chpNum]) {
                    //console.error(ObjName+" miss "+Vol+" "+chpNum + ":*");
                    var VolChp=Vol+""+chpNum;
                    assign_missingOne(g_missingVolChpObj, VolChp, ObjName);
                }else if(undefined==OneObj[Vol][chpNum][versKey]) {
                    var VolChp=Vol+""+chpNum+":"+versKey;
                    assign_missingOne(g_missingVolChpVerses, VolChp, ObjName);
                    //console.error(ObjName+" miss "+VolChp);
                };

            });
        });
    });
};
function MaxObjContrastAllObjs(MaxObj, NameOfObj){
    var idx=-1;
    $.each(NameOfObj,function(name,Obj){
        idx++;
        MaxObjContrastOneObj(MaxObj,Obj,name,idx);
    });
    return g_DiffObj;
}
function gen_ths(thdID, NameOfObject){
    var ths="<tr><th>#</th><th title='vol idx'>vidx</th><th title='Vol-Chp-Vrs'>vcv</th>";
    $.each(NameOfObject,function(skey,obj){
        ths+="<th>"+skey+"</th>";
    });
    ths+="</tr>";
    $("#"+thdID).html(ths);
}
function gen_trs(tbdyID, missObj){
    var trs="";
    $.each(missObj,function(skey, arr){
        var idx=get_vol_idx(skey);
        trs+="<tr><td></td><td>"+idx+"</td><td>"+idx+"-"+skey+"</td>";
        $.each(arr,function(i,val){
            trs+="<td>"+val+"</td>";
        });
        trs+="</tr>";
    });
    $("#"+tbdyID).html(trs);
};

function get_vol_idx(vol){
    var keyArr=Object.keys(NIV_struct);
    var idx=keyArr.indexOf(vol.substring(0,3));
    return (1+idx).toString(10).padStart(2, "0");
c;//1based
};

$(document).ready(function(){

var maxObj=GetMaxKeyObj(NameOfBibleObject);
var difObj=MaxObjContrastAllObjs(maxObj,NameOfBibleObject);

var sout=JSON.stringify(g_missingVolChpObj,null,4);
sout+="\n===difObj===\n"+JSON.stringify(difObj,null,4);
sout+="\n===g_missingVolChpVerses===\n"+JSON.stringify(g_missingVolChpVerses,null,4);
$("#out").html(sout);

gen_ths("missingVolChpObj",NameOfBibleObject);
gen_ths("missingVolChpVerses",NameOfBibleObject);
gen_trs("g_missingVolChpObj", g_missingVolChpObj);
gen_trs("g_missingVolChpVerses", g_missingVolChpVerses);


gen_table_StructAna(H_G_struct);

table_sort();
//table_col_index();
});/////////////



function gen_table_StructAna (BsObj){
    function get_trs(BsObj){
        var trs="";
        $.each(BsObj,function(vol,ChpObj){
            trs+="<tr><td/><td>"+vol+"</td>";
            $.each(ChpObj,function(Chp,VsObj){
                trs+="<td>"+Chp+"</td>";
                $.each(VsObj,function(vrs,txt){
                    trs+="<td>"+vrs+"</td>";
                });
            })

            trs+="</tr>";
        }); 
        return trs;       
    };


    function get_v3cObj(BsObj){
        var Vol3CharObj=[{},{},{}];
        Object.keys(BsObj).forEach(function(vol){
            var VOL=vol.toUpperCase();
            for(var i=0;i<3;i++){
                if(!Vol3CharObj[i][VOL[i]]){
                    Vol3CharObj[i][VOL[i]]={};
                }
                if(i<2) {
                    Vol3CharObj[i][VOL[i]][VOL[1+i]]=i;
                }
            }
        });
        return Vol3CharObj;
    }
    function gen_vTbl(v3cObj){
        var s="";
        for(var i=0;i<30;i++){
            s+="<tr><td/>";
            for(var col=0;col<3;col++){
                var ks=Object.keys(v3cObj[col]).sort();
                var ic=ks[i];
                if(i>=ks.length){
                    s+="<td/>";
                }else{
                    var nextks=Object.keys(v3cObj[col][ic]).sort();
                    s+="<td>"+ic+":"+nextks.join("-")+"</td>";
                }
            }
            s+="</tr>";
        }
        return s;
    }
    var v3cObj=get_v3cObj(BsObj);
    var ss="<table border='1'>"+gen_vTbl(v3cObj);
    //$.each(Vol3CharObj,function(i,cobj){
    //    ss+=gen_3char(i,cobj);
    //});
    ss+="</table>";


    var s=get_trs(BsObj);
    $("#StructAna").html(s).parent().parent().prepend(ss);
}
</script>

</HEAD>
<BODY xxxonload="body_onload();">

<textarea id="out"></textarea>


    <button id="indxer">indxer</button>

<table border="1">
    <thead><tr><td>#</td><td>Vol</td><td>Chp</td><td>Ver</td></tr></thead>
    <tbody id="StructAna"></tbody>
</table>


<table  border="1"><caption id="indxer">missed chapters</caption>
    <thead id="missingVolChpObj"></thead>
	<tbody id='g_missingVolChpObj'></tbody>
 </table>
<table  border="1"><caption>missed versers</caption>
    <thead id="missingVolChpVerses"></thead>
    <tbody id='g_missingVolChpVerses'></tbody>
 </table>


</BODY>
</HTML>
<script type="text/javascript">

</script>
